[Unit]
Description=Stable Diffusion WebUI
After=docker.service
Requires=docker.service

[Service]
Type=notify
NotifyAccess=all
User=clockross
Group=clockross
WorkingDirectory=/opt/clockross
ExecStartPre=-/usr/bin/docker rm -f stable-diffusion-webui
ExecStart=/opt/clockross/setup/docker-run.sh
ExecStop=/usr/bin/docker stop stable-diffusion-webui
TimeoutStartSec=900
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
